<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Bunny Pet Game - KidsCode Lab</title>
    <link rel="stylesheet" href="../styles/master.css">
    <style>
        /* Page-specific styles using CSS custom properties for theme compatibility */
        .lesson-nav {
            background: var(--bg-tertiary);
            padding: 20px;
            border-bottom: 1px solid var(--border-primary);
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .lesson-tab {
            background: var(--bg-secondary);
            border: 2px solid var(--accent-primary);
            color: var(--accent-primary);
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lesson-tab.active,
        .lesson-tab:hover {
            background: var(--accent-primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--shadow-medium);
        }

        .lesson-content {
            padding: 20px;
            background: var(--bg-tertiary);
        }

        .lesson-section {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--border-primary);
            transition: all 0.3s ease;
        }

        .lesson-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--shadow-medium);
        }

        .lesson-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border-primary);
        }

        .lesson-number {
            background: var(--accent-gradient);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            box-shadow: 0 5px 15px var(--shadow-medium);
        }

        .lesson-title {
            color: var(--text-primary);
            font-size: 1.8rem;
            margin: 0;
            font-weight: bold;
        }

        .subsection {
            margin-bottom: 25px;
        }

        .subsection-title {
            color: var(--accent-primary);
            font-size: 1.4rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .subsection-content {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .skill-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        @media (min-width: 769px) {
            .skill-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .skill-card {
            background: var(--bg-elevated);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-primary);
            transition: all 0.3s ease;
        }

        .skill-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px var(--shadow-medium);
            border-color: var(--accent-primary);
        }

        .skill-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .skill-number {
            background: var(--accent-primary);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .skill-title {
            color: var(--text-primary);
            font-size: 1.2rem;
            font-weight: bold;
            margin: 0;
        }

        .skill-description {
            color: var(--text-muted);
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .demo-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--accent-gradient);
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .demo-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--shadow-medium);
        }

        .emoji-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 15px;
            margin: 20px 0;
            padding: 20px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            border: 1px solid var(--border-primary);
        }

        .emoji-item {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid var(--border-primary);
        }

        .emoji-item:hover {
            transform: translateY(-2px);
            background: var(--bg-elevated);
        }

        .emoji-item .emoji {
            font-size: 2rem;
            margin-bottom: 8px;
            display: block;
        }

        .emoji-item .name {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        .requirements-section {
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid var(--color-success);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .requirements-title {
            color: var(--color-success);
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .requirements-list {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .requirements-list ul {
            padding-left: 20px;
        }

        .requirements-list li {
            margin-bottom: 8px;
        }

        .output-preview {
            background: var(--code-bg);
            color: var(--text-secondary);
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            border: 1px solid var(--code-border);
            white-space: pre-wrap;
            overflow-x: auto;
            line-height: 1.4;
            font-size: 0.85rem;
        }

        .system-design {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid var(--border-primary);
        }

        .flow-steps {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .flow-step {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid var(--accent-primary);
            transition: all 0.3s ease;
        }

        .flow-step:hover {
            transform: translateX(5px);
            background: var(--bg-elevated);
        }

        .flow-step-number {
            color: var(--accent-primary);
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .flow-step-content {
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .implementation-tips {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid var(--color-error);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .implementation-tips h4 {
            color: var(--color-error);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .implementation-tips ul {
            color: var(--text-secondary);
            line-height: 1.6;
            padding-left: 20px;
        }

        .implementation-tips li {
            margin-bottom: 8px;
        }

        .implementation-tips code {
            background: var(--code-bg);
            color: var(--code-function);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .challenge-section {
            background: var(--accent-header);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .challenge-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .challenge-list {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .challenge-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .challenge-item:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-2px);
        }

        .testing-checklist {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid var(--border-primary);
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 12px;
            padding: 8px;
            border-radius: 6px;
            transition: background 0.3s ease;
        }

        .checklist-item:hover {
            background: var(--bg-elevated);
        }

        .checklist-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--accent-primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-primary);
            font-weight: bold;
            font-size: 0.8rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .checklist-text {
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .tip-box {
            background: rgba(33, 150, 243, 0.1);
            border: 1px solid var(--color-info);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .tip-box h4 {
            color: var(--color-info);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .tip-box ul {
            color: var(--text-secondary);
            line-height: 1.6;
            padding-left: 20px;
        }

        .tip-box li {
            margin-bottom: 8px;
        }

        .warning-box {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid var(--color-warning);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .warning-box h4 {
            color: var(--color-warning);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .warning-box ul {
            color: var(--text-secondary);
            line-height: 1.6;
            padding-left: 20px;
        }

        .warning-box li {
            margin-bottom: 8px;
        }

        /* Print-friendly theme overrides */
        :root[data-theme="print-friendly"] .challenge-section {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border-primary);
        }

        :root[data-theme="print-friendly"] .challenge-item {
            background: var(--bg-elevated);
            border: 1px solid var(--border-primary);
            color: var(--text-primary);
        }

        @media (max-width: 768px) {
            .lesson-nav {
                flex-direction: column;
                align-items: center;
            }
            
            .lesson-content {
                padding: 15px;
            }
            
            .lesson-section {
                padding: 20px;
            }
            
            .lesson-header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .skill-grid {
                grid-template-columns: 1fr;
            }
            
            .emoji-showcase {
                grid-template-columns: repeat(3, 1fr);
            }
        }

    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-top">
                <div class="brand-logo">
                    <img src="../images/kidscode-lab-logo.png" alt="KidsCode Lab Logo" class="brand-logo-img">
                    <div class="brand-logo-text">KidsCode Lab</div>
                </div>
                
                <div class="theme-switcher">
                    <button class="theme-cycle-button" onclick="cycleTheme()" title="Switch Theme">
                        🔄
                        <div class="theme-tooltip" id="themeTooltip">Next: Light Theme</div>
                    </button>
                </div>
            </div>
            
            <h2>🎮 Virtual Bunny Pet Game</h2>
            <h3>Build your own interactive pet game using Python programming<br>Lessons 7 & 8 - Complete Project Tutorial</h3>
        </div>

        <div class="lesson-nav">
            <a href="#lesson7" class="lesson-tab active" onclick="showLesson(7)">
                <span>📋</span> Lesson 7: Planning & Design
            </a>
            <a href="#lesson8" class="lesson-tab" onclick="showLesson(8)">
                <span>💻</span> Lesson 8: Implementation
            </a>
        </div>

        <div class="lesson-content">
            <!-- LESSON 7: PREPARATION AND DESIGN -->
            <div id="lesson7Content" class="lesson-section">
                <div class="lesson-header">
                    <div class="lesson-number">7</div>
                    <h2 class="lesson-title">Game Preparation & System Design</h2>
                </div>

                <!-- Pre-Game Skills Section -->
                <div class="subsection">
                    <h3 class="subsection-title">🛠️ Pre-Game Skills</h3>
                    <p class="subsection-content">Before we start building our bunny game, let's learn some cool techniques that will make our game more engaging!</p>

                    <div class="skill-grid">
                        <!-- Emoji Discovery -->
                        <div class="skill-card">
                            <div class="skill-header">
                                <div class="skill-number">1</div>
                                <h4 class="skill-title">🎨 Discover Emojis</h4>
                            </div>
                            <p class="skill-description">Make your game colorful and fun with emojis! Visit Emojipedia to find amazing emojis for your projects.</p>
                            <a href="https://emojipedia.org" target="_blank" class="demo-link">
                                <span>📱</span> Explore Emojipedia
                            </a>
                            
                            <div class="emoji-showcase">
                                <div class="emoji-item">
                                    <span class="emoji">🐰</span>
                                    <div class="name">Bunny</div>
                                </div>
                                <div class="emoji-item">
                                    <span class="emoji">🥕</span>
                                    <div class="name">Carrot</div>
                                </div>
                                <div class="emoji-item">
                                    <span class="emoji">🎾</span>
                                    <div class="name">Ball</div>
                                </div>
                                <div class="emoji-item">
                                    <span class="emoji">❤️</span>
                                    <div class="name">Health</div>
                                </div>
                                <div class="emoji-item">
                                    <span class="emoji">😊</span>
                                    <div class="name">Happy</div>
                                </div>
                                <div class="emoji-item">
                                    <span class="emoji">🍽️</span>
                                    <div class="name">Hunger</div>
                                </div>
                            </div>
                        </div>

                        <!-- Animation Effects -->
                        <div class="skill-card">
                            <div class="skill-header">
                                <div class="skill-number">2</div>
                                <h4 class="skill-title">✨ Animation Effects</h4>
                            </div>
                            <p class="skill-description">Learn how to create cool typing and loading effects to make your programs more engaging!</p>
                            
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
<pre><code><span class="code-keyword">import</span> time
<span class="code-keyword">import</span> sys

<span class="code-keyword">def</span> <span class="code-function">typewriter_effect</span>(text, delay=<span class="code-number">0.05</span>):
    <span class="code-comment"># Print text like a typewriter</span>
    <span class="code-keyword">for</span> char <span class="code-keyword">in</span> text:
        sys.stdout.write(char)
        sys.stdout.flush()
        time.sleep(delay)
    <span class="code-keyword">print</span>()

<span class="code-keyword">def</span> <span class="code-function">loading_animation</span>(message=<span class="code-string">"Loading"</span>, duration=<span class="code-number">2</span>):
    <span class="code-comment"># Show loading dots</span>
    <span class="code-keyword">print</span>(<span class="code-string">f"{message}"</span>, end=<span class="code-string">""</span>)
    <span class="code-keyword">for</span> i <span class="code-keyword">in</span> range(duration * <span class="code-number">4</span>):
        <span class="code-keyword">print</span>(<span class="code-string">"."</span>, end=<span class="code-string">""</span>, flush=<span class="code-keyword">True</span>)
        time.sleep(<span class="code-number">0.25</span>)
    <span class="code-keyword">print</span>(<span class="code-string">" Done! ✅"</span>)

<span class="code-comment"># Try it out!</span>
typewriter_effect(<span class="code-string">"🎮 Welcome to the amazing bunny game!"</span>)
loading_animation(<span class="code-string">"Setting up your bunny"</span>, <span class="code-number">3</span>)
typewriter_effect(<span class="code-string">"🐰 Your bunny is ready to play!"</span>)</code></pre>
                            </div>
                        </div>

                        <!-- JSON Refresh -->
                        <div class="skill-card">
                            <div class="skill-header">
                                <div class="skill-number">3</div>
                                <h4 class="skill-title">💾 JSON File Handling</h4>
                            </div>
                            <p class="skill-description">Remember how to save and load data? Here's a quick reminder for persistent game data!</p>
                            
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
<pre><code><span class="code-keyword">import</span> json

<span class="code-comment"># Save data to file</span>
pet_data = {<span class="code-string">"name"</span>: <span class="code-string">"Fluffy"</span>, <span class="code-string">"health"</span>: <span class="code-number">10</span>, <span class="code-string">"happiness"</span>: <span class="code-number">5</span>}
<span class="code-keyword">with</span> <span class="code-function">open</span>(<span class="code-string">"pet_data.json"</span>, <span class="code-string">"w"</span>) <span class="code-keyword">as</span> file:
    json.dump(pet_data, file)

<span class="code-comment"># Load data from file</span>
<span class="code-keyword">try</span>:
    <span class="code-keyword">with</span> <span class="code-function">open</span>(<span class="code-string">"pet_data.json"</span>, <span class="code-string">"r"</span>) <span class="code-keyword">as</span> file:
        pet_data = json.load(file)
<span class="code-keyword">except</span> FileNotFoundError:
    <span class="code-comment"># Create new pet if file doesn't exist</span>
    pet_data = {<span class="code-string">"name"</span>: <span class="code-string">"Fluffy"</span>, <span class="code-string">"health"</span>: <span class="code-number">10</span>}</code></pre>
                            </div>
                            
                            <div class="subsection-content">
                                <strong>📁 This creates a JSON file that looks like:</strong>
                            </div>
                            <div class="output-preview">{"name": "Fluffy", "health": 10, "happiness": 5}</div>
                        </div>

                        <!-- ASCII Art -->
                        <div class="skill-card">
                            <div class="skill-header">
                                <div class="skill-number">4</div>
                                <h4 class="skill-title">🎨 ASCII Art</h4>
                            </div>
                            <p class="skill-description">Make your bunny look amazing with ASCII art! Visit ASCIIart.eu to find more creative designs.</p>
                            <a href="https://www.asciiart.eu" target="_blank" class="demo-link">
                                <span>🎨</span> Explore ASCII Art
                            </a>
                            
                            <div class="output-preview">Our Bunny Design:
    /|   /|      ← Ears
    ( ^_^ )      ← Face
  o_(")(")    ← Body & Feet

Try these variations:
    /|   /|       /|   /|       /|   /|
    ( o.o )       ( -.- )       ( x_x )
    o_(")(")     o_(")(")      o_(")(")
   (Awake)      (Sleeping)      (Sick)</div>
                        </div>
                    </div>
                </div>

                <!-- Game Requirements -->
                <div class="subsection">
                    <h3 class="subsection-title">📋 Game Requirements</h3>
                    <div class="requirements-section">
                        <h4 class="requirements-title">🎯 Your Mission</h4>
                        <div class="requirements-list">
                            <ul>
                                <li>Create a virtual bunny pet that players can care for</li>
                                <li>Allow players to <strong>feed</strong>, <strong>play</strong>, and check their <strong>bunny's status</strong></li>
                                <li>Track bunny's <strong>health</strong>, <strong>happiness</strong>, and <strong>hunger levels</strong></li>
                                <li>Save bunny data so it persists between game sessions</li>
                                <li>Display the bunny with different moods based on its condition</li>
                                <li>Provide a colorful, engaging user interface</li>
                            </ul>
                        </div>
                    </div>

                    <div class="subsection-content">
                        <strong>🖥️ Expected Output:</strong>
                    </div>
                    <div class="output-preview">🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰 🌟 VIRTUAL BUNNY PET GAME 🌟 🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰🐰 
Welcome to the most adorable pet game ever! 🐰 
📋 Loading Fluffy's data... 
........ Done! ✅ 
🎉 Fluffy is ready to play! 
Your bunny is waking up...
    /| /| 
   ( o.o ) 
  o_(")(") 
Good morning, Fluffy! 🌅 
================================================== 
😊 Fluffy is feeling great today! 

     /| /| 
  ( ˶ᵔ ᵕ ᵔ˶ ) 
  o_(")(") 
  
  ❤️ Health: [██████████████████░░] 90% (9/10) 
  😊 Happiness: [████████████████████] 100% (10/10) 
  🍽️ Hunger: [██░░░░░░░░░░░░░░░░░░] 10% (1/10) 
  
================================================== 
  
🎮 What would you like to do with your bunny? 
  
1. 🥕 Feed your pet 
2. 🎾 Play with your pet 
3. 📊 Check pet status 
4. 💾 Save and Quit 
👆 Enter your choice (1-4):</div>
                </div>

                <!-- System Design -->
                <div class="subsection">
                    <h3 class="subsection-title">🏗️ System Design</h3>
                    <div class="system-design">
                        <h4 class="subsection-title">🔄 Game Flow</h4>
                        
                        <div class="flow-steps">
                            <div class="flow-step">
                                <div class="flow-step-number">1. 🚀 Game Initialization</div>
                                <div class="flow-step-content">Load bunny data from JSON file → Display welcome screen → Show bunny waking up</div>
                            </div>
                            
                            <div class="flow-step">
                                <div class="flow-step-number">2. 🔄 Main Game Loop</div>
                                <div class="flow-step-content">Display menu → Get user choice → Execute action → Update bunny stats → Repeat</div>
                            </div>
                            
                            <div class="flow-step">
                                <div class="flow-step-number">3. 🎭 Bunny Mood System</div>
                                <div class="flow-step-content">Calculate overall wellness → Choose appropriate face → Display with matching message</div>
                            </div>
                            
                            <div class="flow-step">
                                <div class="flow-step-number">4. 💾 Data Persistence</div>
                                <div class="flow-step-content">Save bunny stats to JSON file when player quits → Load on next game start</div>
                            </div>
                            
                            <div class="flow-step">
                                <div class="flow-step-number">5. 🎨 Visual Enhancement</div>
                                <div class="flow-step-content">Colors + Emojis + Animations + ASCII Art = Engaging Experience!</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LESSON 8: CODE IMPLEMENTATION -->
            <div id="lesson8Content" class="lesson-section" style="display: none;">
                <div class="lesson-header">
                    <div class="lesson-number">8</div>
                    <h2 class="lesson-title">Code Implementation</h2>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">📝 Code Template</h3>
                    <p class="subsection-content">Focus on the game logic! All the visual effects and decorations are provided for you. Your job is to complete the <strong>TODO</strong> sections with the programming skills you've learned.</p>
                    
                    <div class="tip-box">
                        <h4>🎯 Your Focus Areas</h4>
                        <ul>
                            <li><strong>Functions:</strong> Complete the function logic</li>
                            <li><strong>Dictionaries:</strong> Manage pet data</li>
                            <li><strong>Conditionals:</strong> Make decisions based on pet stats</li>
                            <li><strong>Loops:</strong> Create the main game loop</li>
                            <li><strong>File I/O:</strong> Save and load JSON data</li>
                        </ul>
                    </div>

                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
<pre><code><span class="code-keyword">import</span> json
<span class="code-keyword">import</span> time
<span class="code-keyword">import</span> sys
<span class="code-keyword">import</span> random

<span class="code-comment"># Color codes for terminal output</span>
<span class="code-keyword">class</span> <span class="code-function">Colors</span>:
    HEADER = <span class="code-string">'\033[95m'</span>
    BLUE = <span class="code-string">'\033[94m'</span>
    GREEN = <span class="code-string">'\033[92m'</span>
    WARNING = <span class="code-string">'\033[93m'</span>
    FAIL = <span class="code-string">'\033[91m'</span>
    ENDC = <span class="code-string">'\033[0m'</span>
    BOLD = <span class="code-string">'\033[1m'</span>

<span class="code-comment"># ============== VISUAL EFFECTS (PROVIDED) ==============</span>
<span class="code-keyword">def</span> <span class="code-function">print_colored</span>(text, color):
    <span class="code-string">"""Print text in color"""</span>
    <span class="code-keyword">print</span>(<span class="code-string">f"{color}{text}{Colors.ENDC}"</span>)

<span class="code-keyword">def</span> <span class="code-function">typewriter_effect</span>(text, delay=<span class="code-number">0.03</span>):
    <span class="code-string">"""Print text with typewriter effect"""</span>
    <span class="code-keyword">for</span> char <span class="code-keyword">in</span> text:
        sys.stdout.write(char)
        sys.stdout.flush()
        time.sleep(delay)
    <span class="code-keyword">print</span>()

<span class="code-comment"># ============== YOUR CODE STARTS HERE ==============</span>

<span class="code-comment"># TODO 1: Complete the load_bunny_data function</span>
<span class="code-keyword">def</span> <span class="code-function">load_bunny_data</span>():
    <span class="code-string">"""Load bunny data from JSON file"""</span>
    <span class="code-keyword">try</span>:
        <span class="code-comment"># TODO: Open and read from "pet_data.json"</span>
        <span class="code-comment"># TODO: Return the loaded data</span>
        <span class="code-keyword">pass</span>
    <span class="code-keyword">except</span> FileNotFoundError:
        <span class="code-comment"># TODO: Return default bunny data if file doesn't exist</span>
        <span class="code-comment"># Default: {"name": "Fluffy", "hunger": 5, "happiness": 5, "health": 10}</span>
        <span class="code-keyword">pass</span>

<span class="code-comment"># TODO 2: Complete the save_bunny_data function</span>
<span class="code-keyword">def</span> <span class="code-function">save_bunny_data</span>(pet):
    <span class="code-string">"""Save bunny data to JSON file"""</span>
    <span class="code-comment"># TODO: Open "pet_data.json" in write mode</span>
    <span class="code-comment"># TODO: Use json.dump to save the pet data</span>
    <span class="code-keyword">pass</span>

<span class="code-comment"># TODO 3: Complete the get_bunny_mood function</span>
<span class="code-keyword">def</span> <span class="code-function">get_bunny_mood</span>(pet):
    <span class="code-string">"""Determine bunny's overall mood"""</span>
    <span class="code-comment"># TODO: Calculate total wellness from health, happiness, and hunger</span>
    <span class="code-comment"># Formula: (health + happiness + (10 - hunger)) / 3</span>
    <span class="code-comment"># TODO: Return mood based on total_wellness:</span>
    <span class="code-comment"># >= 8: "ecstatic", >= 6: "happy", >= 4: "okay", >= 2: "worried", else: "sick"</span>
    <span class="code-keyword">pass</span>

<span class="code-comment"># TODO 4: Complete the main function</span>
<span class="code-keyword">def</span> <span class="code-function">main</span>():
    <span class="code-string">"""Main game loop with enhanced experience"""</span>
    <span class="code-comment"># TODO: Load pet data using load_bunny_data()</span>
    <span class="code-comment"># TODO: Display welcome screen</span>
    <span class="code-comment"># TODO: Create main game loop with menu options</span>
    <span class="code-keyword">pass</span>

<span class="code-comment"># Your program starts here</span>
<span class="code-keyword">if</span> __name__ == <span class="code-string">"__main__"</span>:
    main()</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">🎯 Implementation Tips</h3>
                    <div class="implementation-tips">
                        <h4>💡 Programming Tips</h4>
                        <ul>
                            <li><strong>Functions:</strong> Each function should do one specific task</li>
                            <li><strong>Variables:</strong> Use meaningful names like <code>old_hunger</code> instead of <code>x</code></li>
                            <li><strong>Error Handling:</strong> Always use try/except for file operations</li>
                            <li><strong>Bounds Checking:</strong> Use <code>max(0, value)</code> and <code>min(10, value)</code> to keep stats in range</li>
                            <li><strong>Testing:</strong> Test each function individually before combining</li>
                        </ul>
                    </div>

                    <div class="warning-box">
                        <h4>🐛 Common Mistakes to Avoid</h4>
                        <ul>
                            <li>Forgetting to return values from functions</li>
                            <li>Not handling the FileNotFoundError for first-time users</li>
                            <li>Letting stats go below 0 or above 10</li>
                            <li>Not updating the pet variable after feeding/playing</li>
                            <li>Missing the <code>global</code> keyword if using global variables</li>
                        </ul>
                    </div>

                    <div class="challenge-section">
                        <h4 class="challenge-title">🏆 Extension Challenges</h4>
                        <div class="challenge-list">
                            <div class="challenge-item">
                                <strong>🍎 Different Food Types:</strong> Add different food types with different effects on health and happiness
                            </div>
                            <div class="challenge-item">
                                <strong>👥 Multiple Pets:</strong> Create multiple pets that players can choose from and switch between
                            </div>
                            <div class="challenge-item">
                                <strong>🏅 Achievement System:</strong> Add achievements for good pet care (fed 10 times, happiness maxed, etc.)
                            </div>
                            <div class="challenge-item">
                                <strong>🌙 Day/Night Cycle:</strong> Implement a time system that affects the bunny's behavior
                            </div>
                            <div class="challenge-item">
                                <strong>🔊 Sound Effects:</strong> Add sound effects or music using the playsound library
                            </div>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">✅ Testing Checklist</h3>
                    <div class="testing-checklist">
                        <h4 class="subsection-title">🔍 Test Your Game</h4>
                        <div class="checklist-item">
                            <div class="checklist-checkbox">□</div>
                            <div class="checklist-text">Does the game load and display the welcome screen?</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox">□</div>
                            <div class="checklist-text">Can you feed the bunny and see hunger decrease?</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox">□</div>
                            <div class="checklist-text">Can you play with the bunny and see happiness increase?</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox">□</div>
                            <div class="checklist-text">Do the bunny's face and message change based on mood?</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox">□</div>
                            <div class="checklist-text">Does the game save data when you quit?</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox">□</div>
                            <div class="checklist-text">Does the game load your saved bunny when you restart?</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox">□</div>
                            <div class="checklist-text">Are all stats properly bounded (0-10)?</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox">□</div>
                            <div class="checklist-text">Does input validation work for the menu?</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============== THEME SYSTEM ============== 
        const themes = {
            'dark': { name: 'Dark Theme', icon: 'dark' },
            'light': { name: 'Light Theme', icon: 'light' },
            'high-contrast': { name: 'High Contrast', icon: 'high-contrast' },
            'kid-friendly': { name: 'Kid-Friendly', icon: 'kid-friendly' },
            'colorful': { name: 'Colorful', icon: 'colorful' },
            'print-friendly': { name: 'Print-Friendly', icon: 'print-friendly' }
        };

        // Theme cycle order
        const themeOrder = ['dark', 'light', 'high-contrast', 'kid-friendly', 'colorful', 'print-friendly'];
        let currentTheme = 'dark';

        // Initialize theme system
        function initThemeSystem() {
            // Check for saved theme in localStorage
            const savedTheme = localStorage.getItem('kidsCode-theme');
            
            // Check for system preference
            const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // Determine initial theme
            if (savedTheme && themes[savedTheme]) {
                currentTheme = savedTheme;
            } else if (systemPrefersDark) {
                currentTheme = 'dark';
            } else {
                currentTheme = 'light';
            }
            
            // Apply initial theme
            setTheme(currentTheme, false);
            
            // Listen for system theme changes
            if (window.matchMedia) {
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
                    if (!localStorage.getItem('kidsCode-theme')) {
                        setTheme(e.matches ? 'dark' : 'light', false);
                    }
                });
            }
        }

        // Get next theme in cycle
        function getNextTheme(currentTheme) {
            const currentIndex = themeOrder.indexOf(currentTheme);
            const nextIndex = (currentIndex + 1) % themeOrder.length;
            return themeOrder[nextIndex];
        }

        // Update tooltip with next theme
        function updateTooltip() {
            const nextTheme = getNextTheme(currentTheme);
            const tooltip = document.getElementById('themeTooltip');
            if (tooltip) {
                tooltip.textContent = `Next: ${themes[nextTheme].name}`;
            }
        }

        // Cycle to next theme
        function cycleTheme() {
            const nextTheme = getNextTheme(currentTheme);
            setTheme(nextTheme);
        }

        // Set theme
        function setTheme(themeName, saveToStorage = true) {
            if (!themes[themeName]) return;
            
            currentTheme = themeName;
            
            // Apply theme to HTML element
            document.documentElement.setAttribute('data-theme', themeName);
            
            // Update tooltip for next theme
            updateTooltip();
            
            // Save to localStorage
            if (saveToStorage) {
                localStorage.setItem('kidsCode-theme', themeName);
            }
            
            // Trigger custom event for theme change
            window.dispatchEvent(new CustomEvent('themeChanged', { detail: { theme: themeName } }));
            
            // Brief visual feedback
            const button = document.querySelector('.theme-cycle-button');
            if (button) {
                button.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    button.style.transform = '';
                }, 150);
            }
        }

        // Keyboard shortcuts for theme switching
        document.addEventListener('keydown', function(event) {
            // Ctrl/Cmd + Shift + T for theme cycle
            if ((event.ctrlKey || event.metaKey) && event.shiftKey && event.key === 'T') {
                event.preventDefault();
                cycleTheme();
            }
        });

        // ============== TAB SWITCHING FUNCTIONALITY ============== 
        function showLesson(lessonNumber) {
            // Hide all content
            document.getElementById('lesson7Content').style.display = 'none';
            document.getElementById('lesson8Content').style.display = 'none';
            
            // Show selected content
            document.getElementById('lesson' + lessonNumber + 'Content').style.display = 'block';
            
            // Update tab states
            const tabs = document.querySelectorAll('.lesson-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Add active class to clicked tab
            event.target.closest('.lesson-tab').classList.add('active');
            
            // Update URL hash
            window.location.hash = 'lesson' + lessonNumber;
        }

        // ============== COPY CODE FUNCTIONALITY ============== 
        function copyCode(button) {
            const codeBlock = button.nextElementSibling;
            const code = codeBlock.textContent || codeBlock.innerText;
            
            const textarea = document.createElement('textarea');
            textarea.value = code;
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                document.execCommand('copy');
                
                const originalText = button.textContent;
                button.textContent = '✅ Copied!';
                button.style.background = 'rgba(76, 175, 80, 0.3)';
                
                setTimeout(function() {
                    button.textContent = originalText;
                    button.style.background = 'rgba(255,255,255,0.1)';
                }, 2000);
                
            } catch (err) {
                console.error('Failed to copy code:', err);
                button.textContent = '❌ Failed';
                setTimeout(function() {
                    button.textContent = '📋 Copy';
                }, 2000);
            }
            
            document.body.removeChild(textarea);
        }

        // ============== INITIALIZATION ============== 
        
        // Initialize page based on URL hash
        window.addEventListener('load', function() {
            // Initialize theme system first
            initThemeSystem();
            
            // Then handle lesson navigation
            const hash = window.location.hash;
            if (hash === '#lesson8') {
                showLesson(8);
            } else {
                // Default to lesson 7
                showLesson(7);
            }
        });

        // Handle browser back/forward
        window.addEventListener('hashchange', function() {
            const hash = window.location.hash;
            if (hash === '#lesson8') {
                document.getElementById('lesson7Content').style.display = 'none';
                document.getElementById('lesson8Content').style.display = 'block';
                
                document.querySelectorAll('.lesson-tab').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.lesson-tab')[1].classList.add('active');
            } else {
                document.getElementById('lesson7Content').style.display = 'block';
                document.getElementById('lesson8Content').style.display = 'none';
                
                document.querySelectorAll('.lesson-tab').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.lesson-tab')[0].classList.add('active');
            }
        });

        // Listen for theme changes
        window.addEventListener('themeChanged', function(event) {
            console.log('Theme changed to:', event.detail.theme);
            
            // Add any theme-specific behaviors here if needed
            if (event.detail.theme === 'print-friendly') {
                console.log('Print-friendly theme activated - optimized for printing');
            }
        });
    </script>
</body>
</html>